import python ;

if ! [ python.configured ]
{
    ECHO "notice: using default python" ;
    using python ;
}

#local BOOST_SOURCE_PATH = /home/cauv/source/boost_1_42_0 ;
#local BOOST_SOURCE_PATH = /Users/james/Development/boost_1_43_0 ;
local BOOST_SOURCE_PATH = /cauv/boost_1_43_0 ;
local CAUV_PREFIX = /usr/local ;

use-project boost
  : $(BOOST_SOURCE_PATH) ;

project
  : requirements <include>../
                 <include>$(BOOST_SOURCE_PATH)
                 <include>$(CAUV_PREFIX)/include/
                 <library>/boost/python//boost_python
                 <library>/boost/thread//boost_thread
                 <library>/boost/serialization//boost_serialization
                 <library>/boost/system//boost_system
                 <library>/boost/date_time//boost_date_time
                 <library>/boost/system//boost_system
                 <library>/boost/iostreams//boost_iostreams
                 <library>/boost/program_options//boost_program_options
  : build-dir $BJAM_BUILD_DIR ;

lib cvlib : : <name>cv <search>$(CAUV_PREFIX)/lib ;
lib highguilib : : <name>highgui <search>$(CAUV_PREFIX)/lib ;

lib spreadlib : : <name>spread <search>$(CAUV_PREFIX)/lib ;

lib ssrcspreadlib : spreadlib : <name>ssrcspread <search>$(CAUV_PREFIX)/lib ;

lib bpolib : : <name>boost_program_options <search>$(CAUV_PREFIX)/lib  ;
lib bslib : : <name>boost_system <search>$(CAUV_PREFIX)/lib ;

lib libcommon : ../common/messages.cpp
                ../common/image.cpp 
                ../common/cauv_node.cpp 
                ../common/cauv_global.cpp
                ../common/cauv_utils.cpp
                ../common/spread/mailbox_monitor.cpp
                ../common/spread/spread_mailbox.cpp
                ../common/spread/spread_rc_mailbox.cpp
                ../common/spread/spread_messages.cpp
                ../debug/cauv_debug.cpp
                cvlib
                highguilib
                ssrcspreadlib
                bpolib
              : <define>CAUV_DEBUG ;

python-extension cauvinterface : [ glob *.cpp ]
                                 libcommon
                               : <define>CAUV_DEBUG ;

install "./cauv/" : cauvinterface libcommon ;

