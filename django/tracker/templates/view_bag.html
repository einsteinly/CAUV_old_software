{% extends 'base.html' %}
{% block head %}
<script language="javascript">
{{ bag.js|safe }}
</script>
{% endblock %}
{% block breadcrumbs %}<a href="{{ ROOT_URL }}/">Home</a> - {{ bag.title }}{% endblock %}
{% block content %}
<div class="bag">
    <div class="item_key"> {{ bag.title }} </div>
    <div class="bag_toolbox"><a href="{{ ROOT_URL }}/add/entity/{{ bag.add_ref }}">Add</a></div>
    <div class="bag_toolbox">
        <div id="filterSpace"></div>
    <input id="submit" type="submit" value="Order/Filter" onClick="filter()" /> 
    </div>
    {% if bag.errors %}
    <div class="messages">
        <ul>
        {% for filter in bag.errors.items %}
            {% for message in filter.1.items %}
                <li>{{ message.1.0 }} entities were ommitted because of error "{{ message.1.1 }}" in filter {{ filter.0 }}</li>
            {% endfor %}
        {% endfor %}
        </ul>
    </div>
    {% endif %}
    <ul>
    {% for entity in bag.elements %}
    <li><a href="{{ ROOT_URL }}/view/entity/{{ entity.uuid }}">{{ entity.title }}</a></li>
    {% endfor %}
    </ul>
</div>
<script language="javascript">
//we need to run these at the end to make sure things have loaded first
load()
</script>
{% endblock %}
